
@using WebApplication2.Models;
@model List<EquipamentoModel>

@{
    ViewData["Title"] = "Mapeamento de Consumo energético";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - calculodeequipamentos</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />

</head>

<body>

    <header>
        <div class="container-texto">

            <img src="~/logo.jpe.jpe" class="logo-small" alt="Logo">

            <h1>Quem Somos</h1>
            <p>
                Nós do Grupo 02, do curso de Análise e Desenvolvimento de Sistemas, acreditamos que a preservação do meio ambiente é uma responsabilidade de todos, e nos dedicamos a oferecer soluções através da nossa Aplicação voltada para os cálculos do uso da energia solar, além de ser uma solução sustentável e econômica para as necessidades energéticas de todos. Pode ajudar a tornar o mundo um lugar melhor. Trabalhamos para levar a energia solar a cada vez mais pessoas e empresas, com um produto de alta qualidade e tecnologia de ponta. Estamos comprometidos com o futuro sustentável do planeta.
            </p>

        </div>

        
            <div class="container-texto2">

                <h1>Consumo de Energia</h1>
                <p>
                    A conscientização sobre o consumo de energia é fundamental para garantir a sustentabilidade do planeta.O uso de energia limpa e renovável como os painéis solares é uma alternativa cada vez mais importante para diminuir a nossa dependência de fontes de
                    energia não renováveis reduzir a poluição e preservar o meio ambiente.Os painéis solares são uma excelente opção para gerar energia de forma sustentável. Nosso sistema de calculo de consumo de energia com o uso de paineis solares
                    pode economizar até 50% no consumo de energia em sua casa ou empresa.
                </p>

            </div>

    </header>



    <div class="text-center">

        <div class="d-grid gap-2 d-md-flex justify-content-md-start">
            <a class="btn btn-primary" role="button" asp-controller="Equipamento2" asp-action="Adicionar">Adicionar novo equipamento</a>
        </div>
        <br />

        <h1 class="display-4">Listagem de equipamentos</h1>

        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Quantidade</th>
                    <th scope="col">Nome do Equipamento</th>
                    <th scope="col">KHW</th>
                    <th scope="col">Tempo de uso</th>
                    <th scope="col">Consumo</th>
                    <th scope="col"></th>

                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Any())
                {
                    foreach (EquipamentoModel equip in Model)
                    {
                        <tr>
                            <th scope="row">@equip.Id</th>
                            <td>@equip.Quantidade</td>
                            <td>@equip.Nome</td>
                            <td>@equip.Khw</td>
                            <td>@equip.Tempo</td>
                            <td>@equip.Consumo</td>
                            <td>
                                <div class="btn-group" role="group">
                                    <a role="button" class="btn btn-primary" asp-route-id="@equip.Id" asp-asp-controller="Equipamento2" asp-action="Editar">Editar</a>
                                    <a role="button" class="btn btn-danger" asp-route-id="@equip.Id" asp-asp-controller="Equipamento2" asp-action="Apagar">Apagar</a>
                                </div>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    

        <button class="btn btn-primary" id="btnConfirmar">Confirmar</button>
      


    </div>
    <script>
    $(document).ready(function () {
    $('#btnConfirmar').click(function () {
    // Obtém os valores dos equipamentos da tabela e soma os resultados
    var totalConsumo = 0;
    var totalQuantidade = 0;

    $('table tbody tr').each(function () {
    var quantidade = parseInt($(this).find('th').text());
    var consumo = parseFloat($(this).find('td:eq(3)').text());

    totalQuantidade += quantidade;
    totalConsumo += quantidade * consumo;
    });

    // Redirecionar para a action "Resultado" com os valores calculados
    window.location.href = "/Equipamento/Resultado?consumoTotal=" + totalConsumo + "&placasSolares=" + placasSolaresNecessarias;
    });
    });
    </script>

    @Html.Partial("_LoginPartial")

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
  
</body>
</html>